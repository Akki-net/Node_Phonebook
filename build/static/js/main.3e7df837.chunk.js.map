{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/persons.js","components/Persons.js","App.js","index.js"],"names":["Filter","handler","val","className","onChange","value","PersonForm","props","subHandler","name","number","onSubmit","method","for","id","placeholder","maxLength","type","baseURL","axios","get","then","response","data","newObj","post","put","delete","Persons","persons","setHandler","map","p","onClick","window","confirm","personServices","filter","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","addNew","setAddNew","errMsg","setErrMsg","useEffect","returnedPersons","filteredList","word","RegExp","search","style","Event","target","preventDefault","newPerson","forEach","rList","l","updatedItem","catch","error","msg","setTimeout","concat","nam","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3e7df837.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ handler,val }) => <input className=\"form-control\" onChange={handler} value={val} />\r\n\r\nexport default Filter;","import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n\r\n    const { handler,subHandler,name,number} = props;\r\n\r\n    return(\r\n        <form onSubmit={handler} method=\"post\">\r\n        <div className=\"form-group\">\r\n          <label for=\"name\">name:</label> \r\n          <input id=\"name\" className=\"form-control\" onChange={subHandler} placeholder=\"XYZ \" name=\"pName\" value={name} />\r\n        </div>\r\n        <div>\r\n            <label for=\"number\">number:</label>\r\n          <input id=\"number\" className=\"form-control\" placeholder=\"9623500000\" maxLength=\"10\" name=\"pNumber\" value={number} onChange={subHandler} />\r\n        </div>\r\n        <div className=\"mt-2\">\r\n          <button className=\"btn btn-primary\" type=\"submit\">Add</button>\r\n        </div>\r\n        </form>\r\n    )\r\n};\r\n\r\nexport default PersonForm;","import axios from 'axios';\r\nconst baseURL = '/api/persons';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseURL);\r\n    return request.then(response => response.data)\r\n};\r\n\r\nconst create = (newObj) => {\r\n    const request = axios.post(baseURL,newObj);\r\n    return request.then(response => response.data)\r\n};\r\n\r\nconst update = (id, newObj) => {\r\n    const request = axios.put(`${baseURL}/${id}`,newObj);\r\n    return request.then(response => response.data)\r\n};\r\n\r\nconst del = (id) => {\r\n    const request = axios.delete(`${baseURL}/${id}`);\r\n    return request.then(response => response.data)\r\n};\r\n\r\nexport default {getAll, create, update, del};","import React from \"react\";\r\nimport personServices from '../services/persons';\r\n\r\nconst Persons = ({persons, setHandler}) => {\r\n    const deleteHandler = (id) => {\r\n        const result = window.confirm(\"Do You want to delete it?\")\r\n        if(result === true){\r\n            personServices.del(id)\r\n            .then(\r\n               setHandler(persons.filter(p => p.id !== id))\r\n            )\r\n        } \r\n    };\r\n \r\n    return(\r\n        <div className=\"bg-light p-2\">\r\n            { persons.map(p => (\r\n                <div className=\"d-flex justify-content-between align-content-center mb-2\" key={p.id}> \r\n                   <div> {p.name} {p.number} </div>\r\n                   <button className=\"btn btn-danger btn-sm\" onClick={() => deleteHandler(p.id)}>Delete</button>\r\n                </div>\r\n            )\r\n          ) }\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Persons","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter';\r\nimport PersonForm from './components/PersonForm';\r\nimport Persons from './components/Persons';\r\nimport personServices from './services/persons';\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]); \r\n  const [ newName, setNewName ] = useState('');\r\n  const [ newNumber, setNewNumber ] = useState('');\r\n  const [ newSearch, setNewSearch ] = useState('');\r\n  const [ addNew, setAddNew ] = useState('');\r\n  const [ errMsg, setErrMsg ] = useState('');\r\n\r\n  const changeHandler = (Event) => {\r\n    let nam = Event.target.name;\r\n    let val = Event.target.value;\r\n    if(nam === \"pName\"){\r\n      setNewName(val);\r\n    }\r\n    else{\r\n      setNewNumber(val);\r\n    }\r\n  \r\n  };\r\n\r\n  useEffect(() => {\r\n    personServices.getAll()\r\n    .then(returnedPersons => setPersons(returnedPersons))}, []);\r\n\r\n  const submitHandler = Event => {\r\n    Event.preventDefault();\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n    \r\n    persons.forEach(p => {\r\n      if(p.name === newName) {\r\n        let result = false;\r\n        result = window.confirm(`${newName} is already added to phonebook, want to replace with new one?`);\r\n        if(result){\r\n          personServices.getAll().then(rList => {\r\n            rList.forEach(l => {\r\n              if(l.name === newName)\r\n                {\r\n                  const id = l.id;\r\n                 personServices.update(id, newPerson)\r\n                .then(updatedItem => {\r\n                 setPersons(persons.map(val => val.name!==newName ? val : updatedItem));\r\n                  setAddNew(`Changed ${newName}`);  \r\n                 setNewName('');\r\n                   setNewNumber('');\r\n                  }).catch(error => {\r\n                    const msg = `Information of ${l.name} has already been removed`;\r\n                    setErrMsg(msg);\r\n                    setPersons(persons.map(p => p.name!== l.name));\r\n                    setTimeout(()=> setErrMsg(''), 5000);\r\n                  });\r\n                }\r\n            });\r\n          });\r\n        }\r\n        else{\r\n         setNewName('');\r\n         setNewNumber('')\r\n        }\r\n      }\r\n      else{\r\n        personServices.create(newPerson)\r\n        .then(newObj => {\r\n        setPersons(persons.concat(newObj));\r\n        setAddNew(`Added ${newObj.name}`);\r\n        setNewName('');\r\n        setNewNumber('');\r\n      })\r\n      }\r\n    });\r\n\r\n  };\r\n\r\n  const filterHandler = Event => {\r\n    setNewSearch(Event.target.value);\r\n  };\r\n\r\n  const filteredList = newSearch === '' ? persons : persons.filter(p => {\r\n    let word = new RegExp(newSearch, 'i');\r\n    if(p.name.search(word) !== -1){\r\n      return p;\r\n    }\r\n  }); \r\n\r\n  return (\r\n    <div className=\"container bg-info pt-3 mt-3 rounded\">\r\n      <h2 className=\"bg-dark text-info p-2\">Phonebook</h2>\r\n      <p style=\"color: red, padding: 5px, border: 2px solid red\">{errMsg}</p>\r\n      <p style=\"color: green, padding: 5px, border: 2px solid green\">{addNew}</p>\r\n      <Filter handler={filterHandler} val={newSearch} />\r\n      <h3 className=\"mt-2\">Add a new</h3>\r\n      <PersonForm handler={submitHandler} subHandler={changeHandler} name={newName} number={newNumber} />\r\n      \r\n      <h3>Numbers</h3>\r\n      <Persons persons={filteredList} setHandler={setPersons} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}